params:

- {name: w, value: 30, min: 0, max: 50, round: 1}
- {name: b, value: 60, min: 0, max: 60, round: 1}
- {name: d, value: 2, min: 0, max: 4}
- {name: ubar, value: 6}

- {name: p2H, value: 0.75}
- {name: p2L, value: 0.25}



calcs:

  p2H: params.p2H
  p2L: params.p2L

  p1H: (1)-(calcs.p2H)
  p1L: (1)-(calcs.p2L)

  w1: params.w
  u1L: sqrt(calcs.w1)
  u1H: sqrt(calcs.w1)-(params.d)

  w2: (params.w)+(params.b)
  u2L: sqrt(calcs.w2)
  u2H: sqrt(calcs.w2)-(params.d)

  ewH: (calcs.p1H)*(calcs.w1)+(calcs.p2H)*(calcs.w2)
  ewL: (calcs.p1L)*(calcs.w1)+(calcs.p2L)*(calcs.w2)

  euH: (calcs.p1H)*(calcs.u1H)+(calcs.p2H)*(calcs.u2H)
  euL: (calcs.p1L)*(calcs.u1L)+(calcs.p2L)*(calcs.u2L)


aspectRatio: 1

layout:
  OneGraphPlusSidebar:

    graph: 
      xAxis:
        max: 100
        ticks: 0
      yAxis:
        max: 10
        min: -(params.d)
        ticks: 0

      objects:

        - Label:
                coordinates: [100, 0]
                text: "` \\\\text{Payoff} `"
        - Label:
                coordinates: [0, 8]
                text: "` \\\\text{Utilit√†}  `"

# bernoulli utility function with high effort
        - Curve:
            fn: sqrt(x)-(params.d)
            color: Blue
            label:
              text: "` uH `"
              x: 200
              position: c
            strokeWidth: 1.5

# bernoulli utility function with low effort
        - Curve:
            fn: sqrt(x)
            color: Blue
            label:
              text: "` uL `"
              x: 200
              position: c
            strokeWidth: 1.5

# points
        - Point:
            coordinates: [calcs.w1, calcs.u1H]
            droplines: {vertical: calcs.w1.toFixed(0), horizontal: calcs.u1H.toFixed(2)}
            strokeWidth: 0.5
            color: Blue
            r: 3
        - Point:
            coordinates: [calcs.w2, calcs.u2H]
            droplines: {vertical: calcs.w2.toFixed(0), horizontal: calcs.u2H.toFixed(2)}
            strokeWidth: 0.5
            color: Blue
            r: 3
        - Segment:
            a: [calcs.w1, calcs.u1H]
            b: [calcs.w2, calcs.u2H]
            color: Red
            strokeWidth: 1
        - Point:
            coordinates: [calcs.ewH, calcs.euH]
            droplines: {vertical: calcs.ewH.toFixed(0), horizontal: calcs.euH.toFixed(2)}
            strokeWidth: 0.5
            color: Red
            r: 3

        - Point:
            coordinates: [calcs.w1, calcs.u1L]
            droplines: {vertical: calcs.w1.toFixed(0), horizontal: calcs.u1L.toFixed(2)}
            strokeWidth: 0.5
            color: Blue
            r: 3
        - Point:
            coordinates: [calcs.w2, calcs.u2L]
            droplines: {vertical: calcs.w2.toFixed(0), horizontal: calcs.u2L.toFixed(2)}
            strokeWidth: 0.5
            color: Blue
            r: 3
        - Segment:
            a: [calcs.w1, calcs.u1L]
            b: [calcs.w2, calcs.u2L]
            color: Red
            strokeWidth: 1
        - Point:
            coordinates: [calcs.ewL, calcs.euL]
            droplines: {vertical: calcs.ewL.toFixed(0), horizontal: calcs.euL.toFixed(2)}
            strokeWidth: 0.5
            color: Red
            r: 3

# reservation utility
        - Line:
            point: [0,params.ubar]
            slope: 0
            color: Green
            strokeWidth: 1
            label:
              text: "` \\\\underline{U} = ${params.ubar} `"
              x: 100




    sidebar:

      controls:

      - title: Valore atteso, utilit√† attesa e variabilit√† dei payoff
        description: Muovere i primi due cursori per modificare i parametri della funzione di 
                    produzione. Muovere il terzo cursore o trascinare il punto blu nel grafico
                    per vedere come,
                    dati i parametri scelti, la quantit√† di output varia al variare
                     della quantit√† di input.

        # radioGroup:
        #   param: which
        #   options:
        #     - Mantieni ùê∏ùëÉ = 50 costante
        #     - Mantieni ùê∏ùëà = 5 costante

        sliders:
        - param: w
          label: \text{Salario base}
        - param: b
          label: \text{Bonus}

        divs:
        - html: <br>
        - html: "`  ciao
                      `"






    # explanation:
    #   divs:
    #     - html: "` La lotteria
    #                 $$
    #                 \\\\text{$W_1=${params.w1}$ con probabilit√† $0.5$}
    #                 \\\\qquad
    #                 \\\\text{$W_2=${calcs.w2ep}$ con probabilit√† $0.5$}
    #                 $$
    #                 ha valore atteso $
    #                 EP=${params.p1}\\\\times ${params.w1}+
    #                 ${calcs.p2}\\\\times ${calcs.w2ep} = ${params.ep}$
    #                 e d√† utilit√† attesa
    #                 $$
    #                 EU=${params.p1}\\\\times ${params.w1}+
    #                 ${calcs.p2}\\\\times ${calcs.w2ep} = ${params.ep}$
    #                 $$
    #                   `"
    #       show: params.which == 0
















